# ASTRAL CORE V2 - Production Environment Configuration
# Critical configuration for crisis intervention platform
# Security Note: Replace all placeholder values with actual secrets in production

# =============================================================================
# APPLICATION CORE SETTINGS
# =============================================================================

# Application Environment
NODE_ENV=production
PORT=3000
NEXT_TELEMETRY_DISABLED=1

# Domain and URL Configuration
DOMAIN=astralcore.org
NEXTAUTH_URL=https://astralcore.org
NEXTAUTH_SECRET=YOUR_NEXTAUTH_SECRET_HERE_MINIMUM_32_CHARS

# Crisis Platform Configuration
CRISIS_PLATFORM_NAME="ASTRAL Core V2"
CRISIS_HOTLINE_NUMBER="+1-800-CRISIS-1"
EMERGENCY_CONTACT_EMAIL=emergency@astralcore.org

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Primary PostgreSQL Database
DATABASE_URL=postgresql://astral_user:STRONG_DATABASE_PASSWORD@astral-postgres-prod:5432/astral_core_v2
POSTGRES_DB=astral_core_v2
POSTGRES_USER=astral_user
POSTGRES_PASSWORD=STRONG_DATABASE_PASSWORD

# Database Pool Configuration
DB_POOL_MIN=10
DB_POOL_MAX=100
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=10000

# Read Replica (if configured)
DATABASE_READ_URL=postgresql://astral_user:STRONG_DATABASE_PASSWORD@astral-postgres-read:5432/astral_core_v2

# =============================================================================
# CACHE AND SESSION STORAGE
# =============================================================================

# Redis Configuration
REDIS_URL=redis://astral-redis-prod:6379
REDIS_PASSWORD=STRONG_REDIS_PASSWORD
REDIS_HOST=astral-redis-prod
REDIS_PORT=6379
REDIS_DB=0

# Session Configuration
SESSION_SECRET=YOUR_SESSION_SECRET_MINIMUM_64_CHARS
SESSION_MAX_AGE=86400000  # 24 hours in milliseconds
SESSION_SECURE=true
SESSION_SAME_SITE=strict

# =============================================================================
# AUTHENTICATION AND SECURITY
# =============================================================================

# JWT Configuration
JWT_SECRET=YOUR_JWT_SECRET_MINIMUM_64_CHARS
JWT_EXPIRY=24h
JWT_REFRESH_EXPIRY=7d

# Encryption Keys for Crisis Data
CRISIS_ENCRYPTION_KEY=YOUR_AES_256_ENCRYPTION_KEY_32_BYTES
CRISIS_DATA_SALT=YOUR_UNIQUE_SALT_FOR_CRISIS_DATA

# OAuth Providers (if used)
GOOGLE_CLIENT_ID=your_google_oauth_client_id
GOOGLE_CLIENT_SECRET=your_google_oauth_client_secret
FACEBOOK_CLIENT_ID=your_facebook_oauth_client_id
FACEBOOK_CLIENT_SECRET=your_facebook_oauth_client_secret

# Security Headers Configuration
SECURITY_HEADERS_ENABLED=true
CSRF_PROTECTION_ENABLED=true
RATE_LIMIT_ENABLED=true

# =============================================================================
# AI AND ML SERVICES
# =============================================================================

# OpenAI Configuration (for AI safety features)
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_ORGANIZATION_ID=your_openai_org_id
OPENAI_MODEL=gpt-4-turbo
OPENAI_MAX_TOKENS=2048

# AI Safety Configuration
AI_SAFETY_ENABLED=true
AI_CONTENT_FILTERING=strict
AI_RISK_THRESHOLD=0.7
AI_FALLBACK_MODE_ENABLED=true

# Crisis Detection Model
CRISIS_DETECTION_MODEL_URL=https://your-ml-service.com/crisis-detection
CRISIS_DETECTION_API_KEY=your_crisis_detection_api_key

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================

# Prometheus Metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_ENDPOINT=/api/metrics

# Grafana Configuration
GRAFANA_PASSWORD=STRONG_GRAFANA_PASSWORD
GRAFANA_USER=admin

# Application Performance Monitoring
SENTRY_DSN=https://your_sentry_dsn@sentry.io/project_id
SENTRY_ENVIRONMENT=production
SENTRY_SAMPLE_RATE=0.1

# New Relic (alternative APM)
NEW_RELIC_LICENSE_KEY=your_new_relic_license_key
NEW_RELIC_APP_NAME=astral-core-v2-production

# Log Configuration
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_FILE_PATH=/app/logs/application.log
LOG_ROTATION_ENABLED=true

# =============================================================================
# NOTIFICATION SERVICES
# =============================================================================

# Email Service (Critical for crisis notifications)
SMTP_HOST=smtp.your-email-provider.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=notifications@astralcore.org
SMTP_PASSWORD=your_email_service_password

# SMS Service for Crisis Notifications
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890

# Slack Notifications for Incidents
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_CRISIS_CHANNEL=#crisis-alerts
SLACK_SYSTEM_CHANNEL=#system-alerts

# Push Notifications
FIREBASE_PROJECT_ID=your_firebase_project_id
FIREBASE_PRIVATE_KEY=your_firebase_private_key
FIREBASE_CLIENT_EMAIL=your_firebase_service_account_email

# =============================================================================
# CRISIS INTERVENTION CONFIGURATION
# =============================================================================

# Crisis Response Settings
MAX_CONCURRENT_CRISIS_SESSIONS=50
CRISIS_RESPONSE_TIMEOUT=300  # 5 minutes in seconds
EMERGENCY_ESCALATION_TIMEOUT=60  # 1 minute for emergency escalation
AUTO_ESCALATION_ENABLED=true

# Volunteer Management
MIN_AVAILABLE_VOLUNTEERS=5
VOLUNTEER_NOTIFICATION_BATCH_SIZE=10
VOLUNTEER_RESPONSE_TIMEOUT=120  # 2 minutes

# Crisis Categories and Priorities
CRISIS_CATEGORIES=depression,anxiety,suicidal_ideation,substance_abuse,domestic_violence,emergency
HIGH_PRIORITY_CATEGORIES=suicidal_ideation,emergency,domestic_violence
IMMEDIATE_RESPONSE_CATEGORIES=emergency,suicidal_ideation

# =============================================================================
# EXTERNAL INTEGRATIONS
# =============================================================================

# National Crisis Helplines Integration
NATIONAL_SUICIDE_PREVENTION_API=https://api.suicidepreventionlifeline.org
CRISIS_TEXT_LINE_API=https://api.crisistextline.org
EMERGENCY_SERVICES_API_KEY=your_emergency_services_api_key

# Healthcare Provider Integrations
HEALTHCARE_PROVIDER_API=https://api.your-healthcare-provider.com
HEALTHCARE_API_KEY=your_healthcare_api_key

# Mental Health Resources API
MENTAL_HEALTH_RESOURCES_API=https://api.mentalhealth.gov
RESOURCES_API_KEY=your_resources_api_key

# =============================================================================
# BACKUP AND RECOVERY
# =============================================================================

# Database Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION_KEY=your_backup_encryption_key

# S3/Cloud Storage for Backups
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1
BACKUP_BUCKET_NAME=astral-core-v2-backups

# Recovery Configuration
DISASTER_RECOVERY_ENABLED=true
RTO_MINUTES=15  # Recovery Time Objective: 15 minutes
RPO_MINUTES=5   # Recovery Point Objective: 5 minutes

# =============================================================================
# PERFORMANCE AND SCALING
# =============================================================================

# Performance Optimization
CACHE_STRATEGY=redis
CACHE_TTL=3600  # 1 hour default TTL
API_RATE_LIMIT=1000  # Requests per minute per IP
STATIC_ASSET_CDN=https://cdn.astralcore.org

# Auto-scaling Configuration
AUTO_SCALING_ENABLED=true
MIN_INSTANCES=2
MAX_INSTANCES=10
CPU_THRESHOLD=70
MEMORY_THRESHOLD=80

# Database Performance
DB_QUERY_TIMEOUT=30000  # 30 seconds
DB_SLOW_QUERY_THRESHOLD=5000  # 5 seconds
DB_CONNECTION_POOL_SIZE=50

# =============================================================================
# COMPLIANCE AND AUDIT
# =============================================================================

# HIPAA Compliance
HIPAA_COMPLIANCE_ENABLED=true
PHI_ENCRYPTION_ENABLED=true
AUDIT_LOGGING_ENABLED=true
ACCESS_LOGGING_DETAILED=true

# Data Retention Policies
CRISIS_DATA_RETENTION_DAYS=2555  # 7 years as per regulation
SESSION_DATA_RETENTION_DAYS=90
LOG_DATA_RETENTION_DAYS=365

# Privacy Configuration
GDPR_COMPLIANCE_ENABLED=true
DATA_ANONYMIZATION_ENABLED=true
CONSENT_MANAGEMENT_ENABLED=true

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Crisis Platform Features
CRISIS_CHAT_ENABLED=true
CRISIS_VIDEO_ENABLED=true
CRISIS_PHONE_ENABLED=true
AI_ASSISTANCE_ENABLED=true

# Advanced Features
PREDICTIVE_ANALYTICS_ENABLED=true
REAL_TIME_ANALYTICS_ENABLED=true
VOLUNTEER_MATCHING_AI_ENABLED=true

# Emergency Features
EMERGENCY_BROADCAST_ENABLED=true
GEO_LOCATION_SERVICES_ENABLED=true
EMERGENCY_CONTACTS_AUTO_NOTIFY=true

# =============================================================================
# DEVELOPMENT AND DEBUGGING (Production Safe)
# =============================================================================

# Debug Configuration (Keep minimal in production)
DEBUG_MODE=false
VERBOSE_LOGGING=false
API_DOCUMENTATION_ENABLED=false  # Disable in production

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_ENDPOINT=/api/health
DETAILED_HEALTH_CHECKS=true

# =============================================================================
# SECURITY NOTES
# =============================================================================
# 1. Replace ALL placeholder values with actual secrets
# 2. Store this file securely and never commit to version control
# 3. Use environment-specific secret management (AWS Secrets Manager, etc.)
# 4. Rotate secrets regularly (quarterly minimum)
# 5. Monitor for unauthorized access attempts
# 6. Enable audit logging for all environment variable access
# 7. Use principle of least privilege for all API keys and tokens